<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="description" content="چرز – جستجوی هوشمند، امن و بدون ردگیری با موتورهای مستقل و آزاد">
  <meta name="keywords" content="جستجو, سرچ, فارسی, امن, ضد ردگیری, هوش مصنوعی, بلاکچین, BNB, TRX, USDC, فناوری, چرز, چه‌گوارا, آزادی, مقاومت دیجیتال">
  <meta name="author" content="چرز - TechForAll1373">
  <meta name="theme-color" content="#000000" />
  <meta name="robots" content="index, follow" />

  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://duckduckgo.com" crossorigin>
  <link rel="preconnect" href="https://gigablast.com" crossorigin>
  <link rel="preconnect" href="https://mojeek.com" crossorigin>
  <link rel="preconnect" href="https://typesense.org" crossorigin>
  <link rel="preconnect" href="https://whoogl.tech" crossorigin>
  <link rel="preconnect" href="https://f-droid.org" crossorigin>
  <link rel="preconnect" href="https://gitlab.com" crossorigin>
  <link rel="preconnect" href="https://github.com" crossorigin>

  <!-- Fonts with display swap -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap"></noscript>

  <!-- Preload background image -->
  <link rel="preload" as="image" href="https://i.ibb.co/3YqWq1T/cheguvara-glow.jpg" type="image/jpeg">

  <title>چرز | Cherz – جستجوی آینده، آزاد و امن</title>

  <!-- CSP Policy (محدود و امن) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline';
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: https:;
    connect-src 'self' https:;
    font-src 'self' https:;
    frame-src 'none';
    form-action 'self';
    base-uri 'self';
    object-src 'none';
    upgrade-insecure-requests;
  ">

  <style>
    :root {
      --bg-primary: #000;
      --text-primary: #fff;
      --accent: #00ff88;
      --input-bg: rgba(20, 20, 20, 0.6);
      --card-bg: rgba(15, 15, 15, 0.7);
      --hover: rgba(30, 30, 30, 0.8);
      --danger: #ff3366;
      --warning: #ffcc00;
      --glass: rgba(20, 20, 20, 0.35);
    }

    [data-theme="light"] {
      --bg-primary: #f0f0f0;
      --text-primary: #000;
      --accent: #006644;
      --input-bg: #fff;
      --card-bg: #fff;
      --hover: #f5f5f5;
      --glass: rgba(255, 255, 255, 0.8);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Vazirmatn', 'Tahoma', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      direction: rtl;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      transition: background 0.4s ease, color 0.4s ease;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(0, 255, 136, 0.08) 0%, transparent 30%),
        radial-gradient(circle at 80% 70%, rgba(255, 51, 102, 0.05) 0%, transparent 25%),
        url('https://i.ibb.co/3YqWq1T/cheguvara-glow.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-blend-mode: overlay;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 60px 20px 40px;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 4.2rem;
      color: var(--accent);
      margin-bottom: 12px;
      text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
      position: relative;
    }

    h1::after {
      content: "革命";
      position: absolute;
      top: -12px;
      left: 100%;
      margin-left: 12px;
      color: var(--danger);
      text-shadow: 0 0 10px rgba(255, 51, 102, 0.6);
      font-size: 1.2rem;
    }

    .tagline {
      color: #ccc;
      max-width: 800px;
      line-height: 1.8;
      text-align: center;
      text-shadow: 0 1px 3px rgba(0,0,0,0.7);
    }

    .search-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 50px auto;
      backdrop-filter: blur(16px);
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 24px;
      padding: 10px 16px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.6);
    }

    .search-input {
      width: 100%;
      padding: 24px 120px 24px 50px;
      font-size: 1.35rem;
      border: none;
      border-radius: 20px;
      background: var(--input-bg);
      color: var(--text-primary);
      outline: none;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      direction: rtl;
      text-align: right;
      border-left: 4px solid var(--accent);
    }

    .mic-icon, .search-icon, .clear-icon, .voice-indicator {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
      cursor: pointer;
    }

    .mic-icon {
      left: 28px;
      color: var(--warning);
      animation: pulse 1.8s infinite;
    }

    .search-icon {
      right: 76px;
      color: var(--accent);
    }

    .clear-icon {
      right: 30px;
      display: none;
      color: var(--danger);
    }

    .voice-indicator {
      display: none;
      color: var(--danger);
      right: 80px;
      background: rgba(255,51,102,0.15);
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid rgba(255,51,102,0.3);
      font-size: 0.85rem;
    }

    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    .engines-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 20px;
      width: 100%;
      max-width: 1100px;
      margin: 30px auto 50px;
    }

    .engine-card {
      background: var(--card-bg);
      border: 1px solid #333;
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .engine-card:hover, .engine-card:focus {
      transform: translateY(-8px);
      box-shadow: 0 16px 40px rgba(0,255,136,0.15);
      border-color: var(--accent);
    }

    .engine-card img {
      width: 32px;
      height: 32px;
      margin-bottom: 10px;
    }

    .info-section {
      width: 100%;
      max-width: 1000px;
      margin: 50px auto;
      padding: 36px;
      background: var(--glass);
      border-radius: 24px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }

    .quote {
      background: linear-gradient(135deg, rgba(0,255,136,0.15), rgba(255,51,102,0.1));
      border-right: 5px solid var(--accent);
      padding: 20px;
      margin: 24px 0;
      border-radius: 12px;
      font-style: italic;
      text-align: center;
      color: var(--text-primary);
    }

    .browsers-list a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
    }

    .browsers-list a:hover {
      text-decoration: underline;
    }

    .theme-toggle {
      position: absolute;
      top: 20px;
      left: 20px;
      background: var(--glass);
      border: 1px solid #333;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 100;
      font-size: 1.2rem;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--danger);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      z-index: 9999;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @media (max-width: 768px) {
      h1 { font-size: 2.8rem; }
      .search-input { padding: 18px 40px; font-size: 1.1rem; }
      .engines-grid { grid-template-columns: repeat(3, 1fr); }
    }
  </style>
</head>
<body>
  <button id="themeToggle" class="theme-toggle" aria-label="تغییر تم">🌓</button>

  <div class="container">
    <header>
      <h1>چرز</h1>
      <p class="tagline">جستجوی آینده: هوشمند، امن، بدون ردگیری، بدون حافظه، بدون تاریخچه — همه‌چیز پاک می‌شود.</p>
    </header>

    <div class="search-container">
      <div class="mic-icon" id="micButton" role="button" aria-label="جستجوی صوتی">🎙️</div>
      <input type="text" id="searchInput" class="search-input" placeholder="جستجوی هوشمند در تمام موتورها..." autocomplete="off" spellcheck="false" />
      <div class="search-icon">🔍</div>
      <div class="clear-icon" id="clearButton">✖️</div>
      <div class="voice-indicator" id="voiceIndicator">در حال گوش دادن...</div>
    </div>

    <div class="engines-grid" id="enginesGrid">
      <div class="engine-card" data-engine="duckduckgo">
        <img src="https://duckduckgo.com/favicon.ico" alt="DuckDuckGo">
        <span>DuckDuckGo</span>
      </div>
      <div class="engine-card" data-engine="google">
        <img src="https://www.google.com/favicon.ico" alt="Google">
        <span>Google</span>
      </div>
      <div class="engine-card" data-engine="gigablast">
        <img src="https://gigablast.com/favicon.ico" alt="Gigablast">
        <span>Gigablast</span>
      </div>
      <div class="engine-card" data-engine="mojeek">
        <img src="https://mojeek.com/favicon.ico" alt="Mojeek">
        <span>Mojeek</span>
      </div>
      <div class="engine-card" data-engine="typesense">
        <img src="https://typesense.org/favicon.ico" alt="Typesense">
        <span>Typesense</span>
      </div>
      <div class="engine-card" data-engine="whoogl">
        <img src="https://whoogl.tech/favicon.ico" alt="Whoogl">
        <span>Whoogl</span>
      </div>
      <div class="engine-card" data-engine="f-droid">
        <img src="https://f-droid.org/favicon.ico" alt="F-Droid">
        <span>F-Droid</span>
      </div>
      <div class="engine-card" data-engine="gitlab">
        <img src="https://gitlab.com/favicon.ico" alt="GitLab">
        <span>GitLab</span>
      </div>
      <div class="engine-card" data-engine="github">
        <img src="https://github.com/favicon.ico" alt="GitHub">
        <span>GitHub</span>
      </div>
    </div>

    <div class="info-section">
      <h2>چرز – نماد مقاومت و آزادی</h2>
      <div class="info-content">
        <p><strong>چرز</strong> یک پلتفرم جستجوی آزاد، امن و بدون ردگیری است که به کاربران اجازه می‌دهد بدون نگرانی از حریم خصوصی، در موتورهای مستقل جستجو کنند.</p>

        <div class="cyber-tip">🔐 <strong>نکته امنیتی:</strong> این صفحه هیچ اطلاعاتی را ذخیره نمی‌کند.</div>
        <div class="cyber-tip">🛡️ <strong>نکته امنیتی:</strong> از مرورگر فایرفاکس یا تور استفاده کنید.</div>

        <h3>مرورگرهای متن‌باز و حریم‌محور</h3>
        <div class="browsers-list">
          <ul>
            <li><a href="https://www.mozilla.org/firefox/" target="_blank" rel="noopener noreferrer">Firefox</a> – استاندارد طلایی حریم خصوصی</li>
            <li><a href="https://www.torproject.org/" target="_blank" rel="noopener noreferrer">Tor Browser</a> – ناشناسی بالا</li>
            <li><a href="https://brave.com/" target="_blank" rel="noopener noreferrer">Brave</a> – ضد تبلیغات و ردگیری</li>
            <li><a href="https://librewolf.net/" target="_blank" rel="noopener noreferrer">LibreWolf</a> – فورک امن فایرفاکس</li>
            <li><a href="https://mullvad.net/browser" target="_blank" rel="noopener noreferrer">Mullvad Browser</a> – همراه با VPN</li>
            <li><a href="https://ungoogled-software.github.io/" target="_blank" rel="noopener noreferrer">Ungoogled Chromium</a> – بدون گوگل</li>
            <li><a href="https://www.falkon.org/" target="_blank" rel="noopener noreferrer">Falkon</a> – سبک و سریع</li>
            <li><a href="https://wiki.gnome.org/Apps/Web" target="_blank" rel="noopener noreferrer">GNOME Web</a> – ساده و تمیز</li>
            <li><a href="https://www.palemoon.org/" target="_blank" rel="noopener noreferrer">Pale Moon</a> – فورک کلاسیک</li>
            <li><a href="https://www.waterfox.net/" target="_blank" rel="noopener noreferrer">Waterfox</a> – فورک فایرفاکس با پشتیبانی افزونه</li>
          </ul>
        </div>

        <h3>حمایت مالی</h3>
        <p class="crypto-donate">
          <strong>BNB (BEP20):</strong><br>
          <code id="bnb-address">0xf1a5160fE190e16d4D8DDD73E04DF7fBAC17719F</code><br>
          <strong>TRX / USDC (TRC20):</strong><br>
          <code id="trx-address">TPiDbYoBH3rFJfAgV3QL93FLNg4mM5DpVi</code>
        </p>

        <blockquote class="quote">
          «آزادی بدون جنگ، خیانت است.» — چه‌گوارا
        </blockquote>
      </div>
    </div>
  </div>

  <footer>
    <p>چرز &copy; <span id="year">2025</span> | تمامی حقوق محفوظ است</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    if (savedTheme === 'light') body.setAttribute('data-theme', 'light');

    themeToggle.addEventListener('click', () => {
      const isLight = body.getAttribute('data-theme') === 'light';
      body.setAttribute('data-theme', isLight ? null : 'light');
      localStorage.setItem('theme', isLight ? 'dark' : 'light');
    });

    const micButton = document.getElementById('micButton');
    const voiceIndicator = document.getElementById('voiceIndicator');
    const searchInput = document.getElementById('searchInput');
    const clearButton = document.getElementById('clearButton');

    // Keyboard accessibility
    [themeToggle, micButton, clearButton].forEach(el => {
      el.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          el.click();
        }
      });
    });

    const engines = {
      duckduckgo: q => `https://duckduckgo.com/?q=${encodeURIComponent(q)}`,
      google: q => `https://www.google.com/search?q=${encodeURIComponent(q)}`,
      gigablast: q => `https://gigablast.com/search?q=${encodeURIComponent(q)}`,
      mojeek: q => `https://www.mojeek.com/search?q=${encodeURIComponent(q)}`,
      typesense: q => `https://typesense.org/demo/?q=${encodeURIComponent(q)}`,
      whoogl: q => `https://whoogl.tech/search?q=${encodeURIComponent(q)}`,
      'f-droid': q => `https://f-droid.org/en/packages/?q=${encodeURIComponent(q)}`,
      gitlab: q => `https://gitlab.com/search?search=${encodeURIComponent(q)}`,
      github: q => `https://github.com/search?q=${encodeURIComponent(q)}`
    };

    document.querySelectorAll('.engine-card').forEach(card => {
      card.addEventListener('click', () => {
        const query = searchInput.value.trim();
        if (!query) return showToast('لطفاً یک عبارت جستجو وارد کنید.');
        const engine = card.dataset.engine;
        const url = engines[engine](query);
        window.open(url, '_blank', 'noopener,noreferrer');
      });
    });

    searchInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') {
        const query = searchInput.value.trim();
        if (!query) return showToast('لطفاً یک عبارت جستجو وارد کنید.');
        const activeEngine = document.querySelector('.engine-card:focus')?.dataset.engine || 'duckduckgo';
        window.open(engines[activeEngine](query), '_blank', 'noopener,noreferrer');
      }
    });

    micButton.addEventListener('click', () => {
      if (!('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {
        return showToast('مرورگر شما از تشخیص صوت پشتیبانی نمی‌کند.');
      }

      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.lang = 'fa-IR';
      recognition.continuous = false;
      recognition.interimResults = false;

      micButton.style.transform = 'scale(1.1)';
      voiceIndicator.style.display = 'block';

      recognition.start();

      recognition.onresult = e => {
        const transcript = e.results[0][0].transcript.trim();
        if (transcript) {
          searchInput.value = transcript;
          setTimeout(() => {
            window.open(engines['duckduckgo'](transcript), '_blank', 'noopener,noreferrer');
          }, 600);
        }
      };

      recognition.onerror = e => showToast('خطا در تشخیص صوت: ' + e.error);
      recognition.onend = () => {
        micButton.style.transform = '';
        voiceIndicator.style.display = 'none';
      };
    });

    clearButton.addEventListener('click', () => {
      searchInput.value = '';
      searchInput.focus();
      clearButton.style.display = 'none';
    });

    searchInput.addEventListener('input', () => {
      clearButton.style.display = searchInput.value ? 'block' : 'none';
    });

    document.querySelectorAll('.crypto-donate code').forEach(code => {
      code.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(code.textContent);
          const original = code.textContent;
          code.textContent = "کپی شد!";
          setTimeout(() => code.textContent = original, 1500);
        } catch (err) {
          showToast("کپی ناموفق بود.");
        }
      });
    });

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }
  </script>
</body>
</html>
